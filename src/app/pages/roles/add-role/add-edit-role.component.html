<!-- Toast for displaying success/error messages -->
<p-toast></p-toast>

<div class="card">
    <!-- Header with Back button and Title -->
    <div class="flex justify-content-between align-items-center mb-5 border-bottom-1 pb-3">
         <h1 class="font-semibold text-xl m-0">
            {{ (isEditMode ? 'editRole.pageTitle' : 'addRole.pageTitle') | translate }}
        </h1>
        <button
            pButton
            pRipple
            [label]="'common.backButton' | translate"
            icon="pi pi-arrow-left"
            class="p-button-secondary"
            routerLink="/roles"> <!-- Adjust route path if needed -->
        </button>
    </div>

    <!-- Form -->
    <form [formGroup]="roleForm" (ngSubmit)="onSubmit()">
        <div class="grid p-fluid">
            <!-- Name Field -->
            <div class="field col-12 md:col-6">
                <label for="roleName" class="font-semibold block mb-2">
                    {{ 'addRole.nameLabel' | translate }} <span class="text-red-500">*</span>
                </label>
                <input
                    id="roleName"
                    pInputText
                    formControlName="name"
                    [ngClass]="{'ng-invalid ng-dirty': formControls['name'].touched && formControls['name'].invalid}"
                />
                <!-- Validation Messages -->
                <small
                    *ngIf="formControls['name'].touched && formControls['name'].errors?.['required']"
                    class="p-error block mt-1">
                    {{ 'addRole.messages.fieldIsRequired' | translate }}
                </small>
                <small
                    *ngIf="formControls['name'].errors?.['maxlength']"
                    class="p-error block mt-1">
                    {{ 'addRole.messages.mustLessThan' | translate }} 200 {{ 'addRole.messages.characters' | translate }}
                </small>
            </div>

            <!-- Is HR Role Checkbox -->
            <div class="field-checkbox col-12 md:col-6 flex align-items-center mt-4">
                <p-checkbox
                    formControlName="isHRRole"
                    [binary]="true"
                    inputId="isHRRole">
                </p-checkbox>
                <label for="isHRRole" class="ml-2 font-semibold">
                    {{ 'addRole.hrRoleLabel' | translate }}
                </label>
            </div>
        </div>

        <!-- Submit Button -->
        <div class="mt-5">
            <button pButton pRipple type="submit" [disabled]="roleForm.invalid || isSaving">
                <span *ngIf="!isSaving">
                    {{ (isEditMode ? 'editRole.saveButton' : 'addRole.addButton') | translate }}
                </span>
                <span *ngIf="isSaving">
                    <i class="pi pi-spin pi-spinner mr-2"></i>
                    {{ (isEditMode ? 'editRole.savingButton' : 'addRole.addingButton') | translate }}
                </span>
            </button>
        </div>
    </form>
</div>