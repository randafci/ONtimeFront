<!-- Toast for displaying success/error messages -->
<p-toast></p-toast>

<!-- 1. Use the 'form-container' class for overall layout -->
<div class="card form-container">
    <!-- Header (No changes needed, but ensure PrimeFlex classes are removed if any were there) -->
    <div class="flex justify-content-between align-items-center mb-5 border-bottom-1 pb-3">
        <h1 class="font-semibold text-xl m-0">
            {{ (isEditMode ? 'editRole.pageTitle' : 'addRole.pageTitle') | translate }}
        </h1>
        <button
            pButton
            pRipple
            [label]="'common.backButton' | translate"
            icon="pi pi-arrow-left"
            class="p-button-text p-button-secondary"
            routerLink="/roles">
        </button>
    </div>

    <!-- Form -->
    <form [formGroup]="roleForm" (ngSubmit)="onSubmit()">
        <!-- 2. Use the 'form-grid' class for the flex container -->
        <div class="form-grid">
            <!-- Name Field -->
            <!-- 3. Use the 'form-col' class for the grid column -->
            <div class="field form-col">
                <label for="roleName">
                    {{ 'addRole.nameLabel' | translate }} <span class="required-star">*</span>
                </label>
                <input
                    id="roleName"
                    pInputText
                    formControlName="name"
                    [ngClass]="{'ng-invalid ng-dirty': formControls['name'].touched && formControls['name'].invalid}"
                />
                <small
                    *ngIf="formControls['name'].touched && formControls['name'].errors?.['required']"
                    class="p-error block mt-1">
                    {{ 'addRole.messages.fieldIsRequired' | translate }}
                </small>
                <small
                    *ngIf="formControls['name'].errors?.['maxlength']"
                    class="p-error block mt-1">
                    {{ 'addRole.messages.mustLessThan' | translate }} 200 {{ 'addRole.messages.characters' | translate }}
                </small>
            </div>

            <!-- Empty column for spacing. This pushes the first checkbox to the right column -->
            <div class="form-col"></div>

            <!-- Checkboxes, each in its own column -->
            <div class="form-col">
                <div class="field-checkbox">
                    <p-checkbox formControlName="isHRRole" [binary]="true" inputId="isHRRole"></p-checkbox>
                    <label for="isHRRole" class="ml-2">{{ 'addRole.hrRoleLabel' | translate }}</label>
                </div>
            </div>

            <div class="form-col" *ngIf="isAdmin">
                <div class="field-checkbox">
                    <p-checkbox formControlName="isSuperAdmin" [binary]="true" inputId="isSuperAdmin"></p-checkbox>
                    <label for="isSuperAdmin" class="ml-2">{{ 'addRole.isSuperAdmin' | translate }}</label>
                </div>
            </div>

            <div class="form-col">
                <div class="field-checkbox">
                    <p-checkbox formControlName="isHRManager" [binary]="true" inputId="isHRManager"></p-checkbox>
                    <label for="isHRManager" class="ml-2">{{ 'addRole.isHRManager' | translate }}</label>
                </div>
            </div>

            <div class="form-col">
                <div class="field-checkbox">
                    <p-checkbox formControlName="isHRAdministrator" [binary]="true" inputId="isHRAdministrator"></p-checkbox>
                    <label for="isHRAdministrator" class="ml-2">{{ 'addRole.isHRAdministrator' | translate }}</label>
                </div>
            </div>

            <div class="form-col">
                <div class="field-checkbox">
                    <p-checkbox formControlName="isHRSpecialist" [binary]="true" inputId="isHRSpecialist"></p-checkbox>
                    <label for="isHRSpecialist" class="ml-2">{{ 'addRole.isHRSpecialist' | translate }}</label>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="flex justify-content-start gap-2 mt-5">
            <button
                pButton pRipple
                type="button"
                [label]="'common.buttons.cancel' | translate"
                class="p-button-secondary"
                routerLink="/roles">
            </button>
            <button pButton pRipple type="submit" [disabled]="roleForm.invalid || isSaving">
                <span *ngIf="!isSaving">{{ (isEditMode ? 'editRole.saveButton' : 'addRole.addButton') | translate }}</span>
                <span *ngIf="isSaving"><i class="pi pi-spin pi-spinner mr-2"></i>{{ (isEditMode ? 'editRole.savingButton' : 'addRole.addingButton') | translate }}</span>
            </button>
        </div>
    </form>
</div>